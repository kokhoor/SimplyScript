<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="null">
  <select id="selectUser" parameterType="hashmap" resultType="hashmap">
    select * from auth_user
  </select>

  <select id="selectClinicWithFilter" parameterType="hashmap" resultType="hashmap">
    select * from covid_test_clinic
    <where>
        <if test="status != null">
            AND status=#{status}
        </if>
        <if test="name != null">
            AND name=#{name}
        </if>
        <if test="code != null">
            AND code=#{code}
        </if>
    </where>
  </select>

    <insert id="insertClinic" useGeneratedKeys="true" keyProperty="id" keyColumn="id"
      parameterType="hashmap">
      insert into covid_test_clinic
        (createon,modifyon,cert_type,
      <trim suffixOverrides=",">
        <if test="code != null">
            code,
        </if>
        <if test="name != null">
            name,
        </if>
        <if test="status != null">
            status,
        </if>
      </trim>
      ) values (CURRENT_TIMESTAMP,CURRENT_TIMESTAMP,'G',
      <trim suffixOverrides=",">
        <if test="code != null">
            #{code},
        </if>
        <if test="name != null">
            #{name},
        </if>
        <if test="status != null">
            #{status},
        </if>
      </trim>
      )
    </insert>

    <update id="updateClinic" parameterType="hashmap">
      update covid_test_clinic
      <set>
        name = #{name},
        code = #{code},
        <if test="status != null">
          status = #{status},
        </if>
      </set>
      where id = #{id}
    </update>

    <delete id="deleteClinic" parameterType="hashmap">
      delete from covid_test_clinic where id = #{id}
    </delete>
</mapper>
